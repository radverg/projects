<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0070)https://www.fit.vutbr.cz/study/courses/IIS/private/projekt/doc.html.cs -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2"><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style>
    
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

    <h1>4. Nemocnice: elektronická zdravotní kní¾ka</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Autoøi</dt>
	<dd>Adam sedmík <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xsedmi04@stud.fit.vutbr.cz">xsedmi04@stud.fit.vutbr.cz</a> -
		V¹e ohlednì poji¹tìní, seznam pacientù, záznamù a tiketù, testování.
	</dd>
	<dd>Radek Veverka <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xvever13@stud.fit.vutbr.cz">xvever13@stud.fit.vutbr.cz</a> - 
		Zdravotní záznamy, lékaøské zprávy, správa u¾ivatelù, tikety.
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="https://iisprojekt.azurewebsites.net/">https://iisprojekt.azurewebsites.net/</a></dd>
</dl>

<h2>U¾ivatelé systému pro testování</h2>
<p>Uveïte prosím existující zástupce <strong>v¹ech rolí u¾ivatelù</strong>.</p>
<table>
    <tbody>
        <tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
        <tr><td>admin@test.cz</td><td>iisiis</td><td>Administrátor</td></tr>
        <tr><td>lekar1@test.cz</td><td>iisiis</td><td>Lékaø</td></tr>
        <tr><td>lekar2@test.cz</td><td>iisiis</td><td>Lékaø</td></tr>
        <tr><td>pacient1@test.cz</td><td>iisiis</td><td>Pacient</td></tr>
        <tr><td>pacient2@test.cz</td><td>iisiis</td><td>Pacient</td></tr>
        <tr><td>pojistovak@test.cz</td><td>iisiis</td><td>Pracovník zdravotní poji¹»ovny</td></tr>
    </tbody></table>

<h2>Implementace</h2>
<p>
    Projekt jsme implementovali v jazyce C# na platformì .NET 5. Vybrali jsme technologii <em>Razor pages</em> namísto <em>MVC</em>. 
    Ka¾dá <em>Razor page</em> má svùj html kód a je provázána s C# tøídou. 
</p>
<h3>
    Správa u¾ivatelù
</h3>
    <p>
        Kód pro správù u¾ivatelù se nacházi ve slo¾ce <code>Pages/Accounts</code>. Zde jsou view-modely <code>Delete, Edit a Index.</code>
        View-model pro tvorbu u¾ivatele velmi podobný jako editování, proto jsme tyto stránky spojili a rozli¹ujeme podle parametru v URL.
        Index slou¾í k zobrazování seznamu u¾ivatelù. <code>Edit</code> a <code>Delete</code> pak dìlají stejnojmenné operace nad konkrétním u¾ivatelem.
        Ka¾dý u¾ivatel má mo¾nost editovat své údaje nebo smazat svùj úèet po kliknutí na svoji emailovou adresu v pravém horním rohu stránky.
    </p>

 <h3>
    Pohled poji¹tovny
</h3>
    <p>
        Kód pro správu úkonù se nacházi ve slo¾ce <code>Pages/Insurance</code>. Zde jsou view-modely <code>Index, Create a Acts.</code>
        V <code>Index</code> vidí pracovník zdravotní poji¹tovny ¾ádosti o úhrady vystavené lékaøi a má zde mo¾nost je pøijmout nebo odmítnout.
        V <code>Acts</code> se nachází view-model na seznam úkonù, z této stránky má mo¾nost jít vytvoøit nový úkon (stránka <code>Create</code>) nebo prohlí¾et vytvoøené zdravotní úkony.
        Zde má i mo¾nost archivovat zdravotní úkony, tím pádem lékaø u¾ nebude moci o archivované úkony za¾ádat, ale pokud ji¾ o nì bylo za¾ádáno pøed archivací, úkony budou stále v systému.
    </p>

 <h3>
    Seznam záznamù pacienta
</h3>
     <p>
         Kód pro seznam záznamù se nacházi ve slo¾ce <code>Pages/Records</code>. Zde jsou view-modely <code>Index, Edit a Finish.</code>
         V <code>Index</code> vidí lékaø v¹echny záznamy pacienta, které spravuje. Má zde mo¾nost vytvoøit nebo upravit/pøedat záznem (spojeny v view-modelu <code>Edit</code>).
         Dále mo¾nost uzavøít záznam (<code>Finish</code>), a rozkliknout záznam pro prohlí¾ení záznamu. Pro uzavøení záznamu je potøeba, aby v¹echny tikety nále¾ící záznamu byli také uzavøené.
</code></p>

 <h3>
    Seznam nevyøízených tiketù lékaøe
</h3>
     <p>
         Kód pro tikety se nacházi ve slo¾ce <code>Pages/Records/Tickets</code>. Zde jsou view-modely <code>Index, Create a Finish.</code>
         Na <code>Create</code> se dostane lékaø spravující záznam a zde mù¾e vytvoøit ¾ádost o vy¹etøení.
         Na <code>Index</code> se vidí ka¾dý lékaø seznam svých tiketù a má mo¾nost se dostat na stránku s tiketem nebo tiket dokonèit (<code>Finish</code>).
    </p>

 <h3>
    Zobrazení záznamù, tiketù, lékaøských zpráv. 
</h3>
     <p>
         K zobrazování lékaøských zpráv slou¾í 2 podobné prohlí¾eèe záznamù: <code>Pages/Reports/RecordReportBrowser</code> a <code>Pages/Reports/TicketReportBrowser</code>. První slou¾í k výpisu zpráv pøiøazených k zdravotnímu záznamu,
         zároveò je na této stránce vpravo seznam tiketù, které jsou k tomuto záznamu pøiøazeny. Pøes tyto odkazy se dá dostat k detailùm konkrétního tiketu, co¾ je druhý prohlí¾eè záznamù, tentokrát na úrovni tiketu. 
         Z této stránky se dá také ¾ádat o proplacení úkonù pro daný tiket. Pacienti mají k tìmto prohlí¾eèùm pøístup také, nicménì vidí pouze svoje data a nemohou ¾ádná pøidávat nebo editovat.
         Z tìchto stránek mù¾e lékaø nebo administrátor posunout stavy tiketù nebo záznamù a ukonèit tak konkrétní tikety nebo zdravotní záznamy. Po uzavøení u¾ nelze editovat obsah záznamu nebo tiketu.
     </p>

<h3>
    Pacienti
</h3>
    <p>
        Pacient mù¾e procházet svoje zdravotní záznamy, vèetnì tiketù a lékaøských zpráv zkrz view-modely <code>Patients/Records/Index, Patients/Reports/RecordReportBrowser a Patients/Reports/TicketReportBrowser</code>.
        K seznamu pacientù má lékaø pøístup pøes view-model <code>Patients/Index</code>.
    </p>

<h3>Databáze</h3>
<p>
    Jako databázový SQL server je pou¾ita implementace <em>Microsoft SQL Server</em>.
    Databázový model je implementován v adresáøi <code>Data</code>. Je vyu¾ito <em>ORM</em> díky <em>Entity framework Core</em>. Ka¾dá tabulka v databázi je
    mapována do kontrétní C# tøídy. Databázový model je také propojen s databázovým modelem <em>Identity frameworku</em>, který slou¾í k sp
    Jednotlivé entity v er diagramu odpovídají samotným tabulkám v databázi. 
    Databáze navíc obsahuje jednu vazební tabulku TicketActs, která odpovídá ¾ádostem o úhradì úkonù a obsahuje atribut Stav.
</p>
<img src="iis_er.png" />

<h2>Instalace</h2>

<p>
    Pro spu¹tìní aplikace je tøeba mít nainstalován <em>ASP.NET Core Runtime 5.0.0</em>, návod nebo instalaèní soubory pro v¹echny platformy jsou k dispozici na <a href="https://dotnet.microsoft.com/download/dotnet/5.0">oficiálních stránkách Microsoftu</a>.
    Je vy¾adován také <em>Microsoft SQL Server, verze 13.0.4001</em>.
    Soubor <code>appsettings.json</code> obsahuje polo¾ku <code>DefaultConnection</code>, která je vyu¾ita systémem pro zisk údajù potøebných pro pøipojení k databázi. Je tøeba tuto promìnnou nastavit dle lokálního prostøedí a databázového server
    výchozí konfigurace v¹ak funguje pro lokální MS-SQL instalaci.
</p>

<p>
    Pro sta¾ení závislostí lze pou¾ít pøíkaz:
    <br />
    <code>dotnet restore</code>
    <br />
    
    Pro inicializaci schématu databáze a vytvoøení testovacích u¾ivatelù lze pou¾ít pøíkaz:
    <br />
    <code>dotnet ef database update</code>
    <br />

    Následnì lze server spustit pøíkazem:
    <br />
    <code>dotnet run</code>
    <br />
</p>

<h2>Známé problémy</h2>
<p>Nejsou.</p>



</body></html>